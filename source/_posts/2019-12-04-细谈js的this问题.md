---
title: 细谈js的this问题
author: Dovis
top: false
cover: false
date: 2019-12-04 22:50:54
password:
summary: 让js的this问题不再困扰自己
tags:
    - this
categories:
    - 前端进阶
---
### 关于this对象
在《JavaScript高级程序设计》一书中说明了this对象是运行时基于函数的执行环境绑定的：在全局函数中，this等于window，而当函数被作为某个对象的方法调用时，this等于那个对象。
不过，匿名函数的执行环境具有全局性，因此其this对象通常指向window。
```javascript
var name = 'lin jia heng'
    var object = {
        name: 'My Object',
        getNameFunc: function () {
            return function () {
                return this.name; //匿名函数的执行环境具有全局性，所以this指向window
            }
        }
    }
    alert(object.getNameFunc()()) // lin jia heng(非严格模式）
```
而下面的例子就可以成功返回“My Object”
```javascript
var name = 'lin jia heng'
    var object = {
        name: 'My Object',
        getNameFunc: function () {
            return this.name; //当函数被作为某个对象的方法调用时，this等于那个对象
        }
    }
    alert(object.getNameFunc()) // My Object
```
```javascript
var name = 'lin jia heng'
    var object = {
        name: 'My Object',
        getNameFunc: function () {
            let that = this // 改变this指向
            return function () {
                return that.name; //匿名函数的执行环境具有全局性，所以this指向window
            }
        }
    }
    alert(object.getNameFunc()()) // My Object
```
### 在函数中执行
1. 在非严格模式
```javascript
function func(){
    console.log(this)
}
func() //Window
```
2. 在严格模式
```javascript
function func(){
    console.log(this)
}
func() //undefined
```
这就验证了第一个例子中为什么特意表明在非严格模式下才成立了。